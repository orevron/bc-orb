# How to author commands: https://circleci.com/docs/2.0/reusing-config/#authoring-reusable-commands
description: >
  run checkov scan on directory
parameters:
  - directory:
      type: string
      default: "."
      description: "IaC root directory"
  - file:
      type: string
      default: "main.tf"
      description: "IaC file"
  - output:
      type: enum
      enum: ["json", "cli", "junitxml"]
      default: "cli"
      description: "Report output format"
  - suppress:
      type: boolean
      default: false
      description: "Runs checks but suppresses error code"



steps:
  - run:
      name: Checkov
      command: |
        SUPPRESS=<<parameters.suppress>>
        OUTPUT=<<parameters.output>>
        DIRECTORY=<<parameters.directory>>
        FILE=<<parameters.file>>
        echo $SUPPRESS
        echo $OUTPUT
        echo $DIRECTORY
        echo $FILE
#        checkov -s << parameters.suppress >> -o << parameters.output >> -d << parameters.directory >>
